<div class="row">
	<div class="col-md-8">
		<canvas id="pagesketch_viewport" width="800" height="1050" style="background: url(<%= @job.file.to_s %>); no-repeat; border:1px solid #000000"></canvas>
	</div>

	<div class="col-md-offset-1 col-md-3">
	<div class="card card-block" style="position: fixed;width:300px;">
		<div class="card-title">
			<%= render 'card_title' %>
		</div>

		
		<div class="card-block">
			<%= simple_form_for(@grade, url: job_grade_submit_path(@job)) do |f| %>
				<%= f.error_notification %>
				<%= f.input :mark, input_html: { type: 'number', max: @job.questionpaperspec.marks, min: 0 }, autofocus: false %>
				<h1 style="text-align: center;"><%= f.label @job.questionpaperspec.marks.to_s %> </h1>	
				<%= f.input :teacher_id, as: :hidden, :input_html => { value: @grade.teacher_id } %>
				<%= f.input :job_id, as: :hidden, :input_html => { value: @grade.job_id } %>
				<div class="actions">
					<%= f.button :submit,  style: "text-align: center;", disabled: 'disabled' %>
				</div>
			<% end %>
		</div>
	</div>
</div>

<script type="text/javascript">
	$(document).ready(function() {
	    $('#grade_mark').keyup(function() {

	        var empty = false;
	        $('#grade_mark').each(function() {
	            if ($(this).val() > <%= @job.questionpaperspec.marks %> || $(this).val() < 0) {
	                empty = true;
	            }
	        });

	        if (empty) {
	            $('.actions input').attr('disabled', 'disabled');
	        } else {
	            $('.actions input').attr('disabled', false);
	        }
	    });
	})
</script>

<script type="text/javascript">
  $(function() {
    $('#pagesketch_viewport').sketch();
  });
</script>